# Strategy Pattern

> 알고리즘군을 정의하고 각각을 캡슐화하여 교환해서 사용할 수 있도록 만든다. 스트래티지를 활용하면 알고리즘을 사용하는 클라이언트와의 독립적으로 알고리즘을 변경할 수 있다.
> 

### 비유해보기

객체 지향을 활용하고 싶은 신입 개발자 유씨는 이번 오리 게임에 관련하여 오리를 만드는 임무를 부여받았다. 유씨는 긴 고민을 하다 오리를 추상화된 객체로 만들어 다양한 오리들을 구현할 수 있게 만들었다.

<img width="582" alt="스크린샷 2021-10-14 오후 6 13 39" src="https://user-images.githubusercontent.com/58363663/137288055-22a1d431-8c39-4806-b449-12315416cc34.png">


이렇게 구현한 신입사원 유씨는 '이제 새로운 기능이 들어오면 오리 클래스에 기능을 추가하면 되겠지? 난 천재야!'라고 생각했다. 

실제로 날아다녀야 하는 기능이 추가되었다. 유씨는 오리클레스에 날기() 기능을 추가하였다.

<img width="545" alt="스크린샷 2021-10-14 오후 6 15 09" src="https://user-images.githubusercontent.com/58363663/137288127-65f6c6a6-e308-44ed-ac9f-eca570c1546f.png">



기능을 추가하여 데모를 했더니 난리가 났다. '또치는 날아다니면 안되는데 왜 날아다니나요. 이게 게임입니까??'

아뿔사 개발자 유씨는 모든 오리들에게 날아다니는 기능을 추가해버렸다. 매번 오리가 추가될때마다 기능이 조금씩 다를텐데 어떻게 해야될까 고민하는 순간 선배 개발자가 '전략패턴을 사용해보겠어요?'라고 키워드를 남겨주었다.

이제부터 방금 상황을 코드로 구현해보며 전략패턴에 대해 이해해보자. 

### 전략 패턴

```java
abstract class Duck {
    void run() { System.out.println("달린다!"); }
    void jump() { System.out.println("점프한다!"); }
    void dance() { System.out.println("춤춘다!"); }
}

class DonaldDuck extends Duck {

}

class Tube extends Duck {

}

class Ddochi extends Duck {

}
```

이때 날기 기능을 어떻게 추가해야할까? 날아다니는 기능이 담겨있는 인터페이스를 하나 만들어주면 된다.

```java
interface FlyBehavior {
    void fly();
}

class FlyWithWings implements FlyBehavior {

    @Override
    public void fly() {
        System.out.println("날아다닌다!");
    }
}

class FlyNoWay implements FlyBehavior {

    @Override
    public void fly() {
        // 날지 않는다.
    }
}
```

이제 FlyBehavior 인터페이스를 오리의 필드로 넣어주자.

```java
abstract class Duck {
    FlyBehavior flyBehavior;

    public Duck(FlyBehavior flyBehavior) {
        this.flyBehavior = flyBehavior;
    }

    void run() { System.out.println("달린다!"); }
    void jump() { System.out.println("점프한다!"); }
    void dance() { System.out.println("춤춘다!"); }
		**void fly() { this.flyBehavior.fly(); }**
}
```

이제 오리가 생성될 때 날게 만들지 못 날게 만들지 정해줄 수 있다. 
setFlyBehavior()라는 메소드를 만들어서 날지 못한 상태에서도 다시 날아다니도록 쉽게 변경할 수도 있다.

<img width="814" alt="스크린샷 2021-10-14 오후 6 15 37" src="https://user-images.githubusercontent.com/58363663/137288319-71e5eea5-1501-4726-8e8b-49b9200897b7.png">



### 정리

전략패턴을 사용하면 기능에 대해 유연하게 대처가 가능하다 느겼고 정말 자주쓰이는 패턴같아 보여 잘 익혀두어야겠다.
